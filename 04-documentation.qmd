# Documentation {#sec-documentation}

```{r, include = FALSE}
source("R/setup.R")
```

Write function documentation using the roxygen format. This is what creates the help documentation for functions.

```{r}
library(devtools) # for rendering documentation and loading your package
```

## Roxygen

Go to the `R/apa_t_pair.R` file we created last week. Put your cursor anywhere inside that function and choose **`Insert Roxygen Skeleton`** from the **`Code`** menu. It should generate documentation code in roxygen format like this:

``` roxygen
#' Title
#'
#' @param x
#' @param y
#' @param dv
#' @param level1
#' @param level2
#'
#' @return
#' @export
#'
#' @examples
```

This creates the help files you can see for any function. For example, type `?mean` in the console. 


### Title and Description

The first line of the roxygen documentation is the title and the paragraph under that is the description. If you have more than one paragraph of description, you need to add the `@description` tag. Update your documentation like this:

``` roxygen
#' APA text for Paired-Samples T-Test
#' 
#' @description
#' Create APA-formatted text for the results of an independent-samples t-test in the following format:
#'
#' A paired-samples t-test was conducted to compare \{dv\} between \{level1\} (M = \{mean1\}, SD = \{sd1\}) and \{level2\} (M = \{mean2\}, SD = \{sd2\}). There was a \{non\}significant difference; t(\{df\}) = \{t_value\}, p = \{p_value\}.

```

::: {.info} 
The curly brackets need to be prefaced by a backslash so they will show as literal curly brackets in the Help files, rather than be interpreted as markdown syntax.
:::

### Arguments

The "Arguments" section is created from the lines that start with `@param`. They should define each argument in the function.

``` roxygen
#' @param x A vector of the values for level 1.
#' @param y A vector of the values for level 2.
#' @param dv The text describing the DV in the output statement.
#' @param level1 The text describing level 1 in the output statement.
#' @param level2 The text describing level 2 in the output statement.
```

### Return Value

The line starting with `@return` creates the "Value" section. This tells the user what kind of object is returned from the function. The line `@export` tells the package that this is a function you want others to be able to use; if you omit this, the function will only be available internally to your package.

``` roxygen
#' @return A character string.
#' @export
```

### Examples

Add at least one example that shows how the function works. Make sure to create any objects you need to run the function. Here, we can use the data object `self_res_att` because we added it to our package in @sec-data. 

``` roxygen
#' @examples
#' # use generic text
#' apa_t_pair(x = self_res_att$f_self,
#'            y = self_res_att$f_non)
#'
#' # specify the text for dv and levels
#' apa_t_pair(x = self_res_att$f_self,
#'            y = self_res_att$f_non,
#'            dv = "preferences for female faces",
#'            level1 = "participants who resembled those faces",
#'            level2 = "non-self participants")
```

## Document and Load

Now, you need to run a documentation function to add your function to the package documentation and export it for use.

```{r, eval = FALSE}
devtools::document()
```

You should see output like this.

::: {.cell-output}
```
ℹ Updating demopkg documentation
ℹ Loading demopkg
Writing NAMESPACE
Writing apa_t_pair.Rd
```
:::

Now restart R and make sure that your environment is clear. Run the following code to load your package (Mac: cmd-shift-L, Windows: ctl-shift-L) and view the new Help documentation.

```{r, eval = FALSE}
devtools::load_all(".")
?apa_t_pair
```


## Glossary

```{r, echo = FALSE, results='asis'}
glossary_table(as_kable = FALSE) |> 
  kableExtra::kable(row.names = FALSE, escape = FALSE) |>
  unclass() |> cat()
```

## Further Practice

1. Add another example to the documentation.

1. Document any other functions you've created.


