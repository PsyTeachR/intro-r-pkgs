<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Coding Club: Creating an R Package - 2&nbsp; Adding Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03-functions.html" rel="next">
<link href="./01-setup.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-6NP3MF25W3', { 'anonymize_ip': true});
</script><link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Adding Data</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Coding Club: Creating an R Package</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/psyteachr/intro-r-pkgs/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
<a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Overview</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-setup.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Setting up</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-data.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Adding Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Custom Functions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-documentation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Documentation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-unit-tests.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Unit Tests</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-vignettes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Analysis Vignette</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-pkgdown.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Pkgdown Websites</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-maintenance.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Package Maintenance</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-sharing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Sharing your package</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-next-steps.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Next Steps</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#process-data" id="toc-process-data" class="nav-link active" data-scroll-target="#process-data"><span class="toc-section-number">2.1</span>  Process Data</a>
  <ul class="collapse">
<li><a href="#raw-data-directory" id="toc-raw-data-directory" class="nav-link" data-scroll-target="#raw-data-directory"><span class="toc-section-number">2.1.1</span>  Raw Data Directory</a></li>
  <li><a href="#add-raw-data" id="toc-add-raw-data" class="nav-link" data-scroll-target="#add-raw-data"><span class="toc-section-number">2.1.2</span>  Add Raw Data</a></li>
  <li><a href="#sec-load-data" id="toc-sec-load-data" class="nav-link" data-scroll-target="#sec-load-data"><span class="toc-section-number">2.1.3</span>  Load Data</a></li>
  <li><a href="#check-column-types" id="toc-check-column-types" class="nav-link" data-scroll-target="#check-column-types"><span class="toc-section-number">2.1.4</span>  Check Column Types</a></li>
  <li><a href="#add-processed-data" id="toc-add-processed-data" class="nav-link" data-scroll-target="#add-processed-data"><span class="toc-section-number">2.1.5</span>  Add Processed Data</a></li>
  </ul>
</li>
  <li>
<a href="#documentation" id="toc-documentation" class="nav-link" data-scroll-target="#documentation"><span class="toc-section-number">2.2</span>  Documentation</a>
  <ul class="collapse">
<li><a href="#data-decsription" id="toc-data-decsription" class="nav-link" data-scroll-target="#data-decsription"><span class="toc-section-number">2.2.1</span>  Data Decsription</a></li>
  <li><a href="#column-descriptions" id="toc-column-descriptions" class="nav-link" data-scroll-target="#column-descriptions"><span class="toc-section-number">2.2.2</span>  Column Descriptions</a></li>
  <li><a href="#add-to-package" id="toc-add-to-package" class="nav-link" data-scroll-target="#add-to-package"><span class="toc-section-number">2.2.3</span>  Add to Package</a></li>
  </ul>
</li>
  <li><a href="#load-in-package" id="toc-load-in-package" class="nav-link" data-scroll-target="#load-in-package"><span class="toc-section-number">2.3</span>  Load in package</a></li>
  <li><a href="#glossary" id="toc-glossary" class="nav-link" data-scroll-target="#glossary"><span class="toc-section-number">2.4</span>  Glossary</a></li>
  <li><a href="#further-resources" id="toc-further-resources" class="nav-link" data-scroll-target="#further-resources"><span class="toc-section-number">2.5</span>  Further Resources</a></li>
  <li><a href="#further-practice" id="toc-further-practice" class="nav-link" data-scroll-target="#further-practice"><span class="toc-section-number">2.6</span>  Further Practice</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/psyteachr/intro-r-pkgs/edit/master/02-data.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/psyteachr/intro-r-pkgs/issues/new" class="toc-action">Report an issue</a></p><p><a href="https://github.com/psyteachr/intro-r-pkgs/blob/master/02-data.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-data" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Adding Data</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header><p><a href="https://uofglasgow.zoom.us/rec/share/o0RHg82nSsyPLSMpA5hxHdqiHnc86H7zmBvzDL-n6ICqq0NQ1wHf8FKF3zvkeGmj.H72yZQDGbVST5gqQ">Recording</a> (passcode: codingclub22!)</p>
<p>Add datasets to your package and document them with a codebook. You can use our demo data or your own.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># packages required for this chapter</span></span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(usethis)  <span class="co"># for setting up data sets in a package</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(readr)    <span class="co"># for reading in CSV data</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(glue)     <span class="co"># for text joining</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(devtools) <span class="co"># for loading your package</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="process-data" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="process-data">
<span class="header-section-number">2.1</span> Process Data</h2>
<p>We’re going to add some data from <span class="citation" data-cites="debruine2004">DeBruine (<a href="references.html#ref-debruine2004" role="doc-biblioref">2004</a>)</span> looking at attractiveness judgements of same-sex and other-sex self-resembling faces. Follow the directions below for each data set you want to add to your package.</p>
<section id="raw-data-directory" class="level3" data-number="2.1.1"><h3 data-number="2.1.1" class="anchored" data-anchor-id="raw-data-directory">
<span class="header-section-number">2.1.1</span> Raw Data Directory</h3>
<p>Run the code below.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>usethis<span class="sc">::</span><span class="fu">use_data_raw</span>(<span class="st">"self_res_att"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first time you run this function in a new package project, it will create a directory called <code>data-raw</code> and add this directory to the <code>.Rbuildignore</code> file so it isn’t included in your package.</p>
<div class="webex-solution">
<button>
Data Privacy
</button>
<p>Any processed data you include in an R package is viewable by anyone who downloads the package. Anything in the <code>data-raw</code> directory is not included in the <strong>package</strong>, but if you share your whole project publicly on GitHub, people will be able see the raw data and processing code. You can prevent this by adding this directory to <code>.gitignore</code> (which we will discuss in <a href="09-sharing.html"><span>Chapter&nbsp;9</span></a>), but it’s pretty easy to make errors that accidentally share everything, so the safest way is to process your data outside the package project if you really can’t share the raw data.</p>
</div>
<p>It will also open a file in that directory called <code>self_res_att.R</code> with the following contents.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="do">## code to prepare `self_res_att` dataset goes here</span></span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a>usethis<span class="sc">::</span><span class="fu">use_data</span>(self_res_att, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="add-raw-data" class="level3" data-number="2.1.2"><h3 data-number="2.1.2" class="anchored" data-anchor-id="add-raw-data">
<span class="header-section-number">2.1.2</span> Add Raw Data</h3>
<p>Download the data file called <code>DeBruine_2004_PRSLB_att.csv</code> from <a href="https://osf.io/2ud56/" class="uri">https://osf.io/2ud56/</a> and save it in <code>data-raw</code>. The code below will also do this.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">"https://osf.io/download/3c5s4/"</span>,</span>
<span id="cb4-2"><a href="#cb4-2"></a>              <span class="at">destfile =</span> <span class="st">"data-raw/DeBruine_2004_PRSLB_att.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="sec-load-data" class="level3" data-number="2.1.3"><h3 data-number="2.1.3" class="anchored" data-anchor-id="sec-load-data">
<span class="header-section-number">2.1.3</span> Load Data</h3>
<p>Now, load the data in this script, using the object name <code>self_res_att</code>; this will be the name of the data object in your package. You will see some message text about the data.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>self_res_att <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data-raw/DeBruine_2004_PRSLB_att.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="info">
<p>I use <code><a href="https://readr.tidyverse.org/reference/read_delim.html">readr::read_csv()</a></code> so we can fix the column types, but you’re free to use any way you’re comfortable with to load and process the data.</p>
</div>
</section><section id="check-column-types" class="level3" data-number="2.1.4"><h3 data-number="2.1.4" class="anchored" data-anchor-id="check-column-types">
<span class="header-section-number">2.1.4</span> Check Column Types</h3>
<p>Have a quick look at the data and make sure the columns import as the right data types. You might want to make sure that categorical factors are imported as factors with their levels in a sensible order.</p>
<ol type="1">
<li>use <code>readr::spec(self_res_att)</code> to get the default column types,</li>
<li>copy and paste this to your script,</li>
<li>assign them to an object (here called <code>ct</code>), and</li>
<li>edit them to set factors with levels in a sensible order</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">spec</span>(self_res_att)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cols(
  id = col_character(),
  sex = col_character(),
  ethgroup = col_character(),
  age = col_double(),
  m_non = col_double(),
  f_non = col_double(),
  m_self = col_double(),
  f_self = col_double(),
  grpsize = col_double(),
  group = col_double(),
  mascpref = col_double(),
  obro = col_double(),
  osis = col_double(),
  ybro = col_double(),
  ysis = col_double(),
  birthorder = col_character()
)</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>ct <span class="ot">&lt;-</span> <span class="fu">cols</span>(</span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="at">id =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="at">sex =</span> <span class="fu">col_factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"female"</span>, <span class="st">"male"</span>)),</span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="at">ethgroup =</span> <span class="fu">col_factor</span>(),</span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="at">age =</span> <span class="fu">col_double</span>(),</span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="at">m_non =</span> <span class="fu">col_double</span>(),</span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="at">f_non =</span> <span class="fu">col_double</span>(),</span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="at">m_self =</span> <span class="fu">col_double</span>(),</span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="at">f_self =</span> <span class="fu">col_double</span>(),</span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="at">grpsize =</span> <span class="fu">col_double</span>(),</span>
<span id="cb8-11"><a href="#cb8-11"></a>  <span class="at">group =</span> <span class="fu">col_double</span>(),</span>
<span id="cb8-12"><a href="#cb8-12"></a>  <span class="at">mascpref =</span> <span class="fu">col_double</span>(),</span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="at">obro =</span> <span class="fu">col_double</span>(),</span>
<span id="cb8-14"><a href="#cb8-14"></a>  <span class="at">osis =</span> <span class="fu">col_double</span>(),</span>
<span id="cb8-15"><a href="#cb8-15"></a>  <span class="at">ybro =</span> <span class="fu">col_double</span>(),</span>
<span id="cb8-16"><a href="#cb8-16"></a>  <span class="at">ysis =</span> <span class="fu">col_double</span>(),</span>
<span id="cb8-17"><a href="#cb8-17"></a>  <span class="at">birthorder =</span> <span class="fu">col_factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"only"</span>, <span class="st">"firstborn"</span>, <span class="st">"middleborn"</span>, <span class="st">"lastborn"</span>))</span>
<span id="cb8-18"><a href="#cb8-18"></a>)</span>
<span id="cb8-19"><a href="#cb8-19"></a></span>
<span id="cb8-20"><a href="#cb8-20"></a>self_res_att <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data-raw/DeBruine_2004_PRSLB_att.csv"</span>, <span class="at">col_types =</span> ct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="add-processed-data" class="level3" data-number="2.1.5"><h3 data-number="2.1.5" class="anchored" data-anchor-id="add-processed-data">
<span class="header-section-number">2.1.5</span> Add Processed Data</h3>
<p>Once you’re satisfied that the data are in the right form, you can run this code to add the data to your package.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>usethis<span class="sc">::</span><span class="fu">use_data</span>(self_res_att, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output">
<pre><code>✔ Adding 'R' to \033[32mDepends\033[39m field in DESCRIPTION
✔ Setting \033[32mLazyData\033[39m to 'true' in 'DESCRIPTION'
✔ Saving 'self_res_att' to 'data/self_res_att.rda'
• Document your data (see 'https://r-pkgs.org/data.html')</code></pre>
</div>
</section></section><section id="documentation" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="documentation">
<span class="header-section-number">2.2</span> Documentation</h2>
<p>Data need to be documented to be included in a package. The documentation looks like this:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co">#' Title.</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="co">#'</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="co">#' Description of the dataset.</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co">#'</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co">#' @format A data frame with {nrow} rows and {ncol} variables:</span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co">#' \describe{</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="co">#'   \item{col1}{col1 description}</span></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="co">#'   \item{col2}{col2 description}</span></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="co">#' }</span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co">#' @source \url{data_URL}</span></span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="st">"dataname"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="data-decsription" class="level3" data-number="2.2.1"><h3 data-number="2.2.1" class="anchored" data-anchor-id="data-decsription">
<span class="header-section-number">2.2.1</span> Data Decsription</h3>
<p>Create a new script called “self_res_att”. The function <code>use_r()</code> will save it in the right directory as <code>R/self_res_att.R</code>“` and open it in the source pane.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>usethis<span class="sc">::</span><span class="fu">use_r</span>(<span class="st">"self_res_att"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="warning">
<p>Make sure you don’t confuse this file with the processing script at <code>data-raw/self_res_att.R</code>.</p>
</div>
<p>Edit the title, description, format, source, and dataname from the template above (or just copy the text below).</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co">#' Attractiveness of Self-Resembling Faces.</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="co">#'</span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="co">#' Attractiveness judgements of same-sex and other-sex self-resembling faces from DeBruine (2004).</span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co">#'</span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="co">#' @format A data frame with 108 rows and 16 variables:</span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co">#' \describe{</span></span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="co">#'   \item{col1}{col1 description}</span></span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="co">#'   \item{col2}{col2 description}</span></span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="co">#' }</span></span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="co">#' @source \url{https://osf.io/3c5s4/}</span></span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="st">"self_res_att"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="column-descriptions" class="level3" data-number="2.2.2"><h3 data-number="2.2.2" class="anchored" data-anchor-id="column-descriptions">
<span class="header-section-number">2.2.2</span> Column Descriptions</h3>
<p>You can manually edit the column <code>\item</code> descriptions, but this can be pretty tedious for longer data sets. I’ll show you how to make the process a little easier.</p>
<p>Use the following code to get a list of the column names in the data set. The function <code><a href="https://rdrr.io/r/base/dput.html">dput()</a></code> gives you the code needed to create an object.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>coldesc <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">""</span>, <span class="fu">ncol</span>(self_res_att))</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="fu">names</span>(coldesc) <span class="ot">&lt;-</span> <span class="fu">names</span>(self_res_att)</span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="fu">dput</span>(coldesc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>c(id = "", sex = "", ethgroup = "", age = "", m_non = "", f_non = "", 
m_self = "", f_self = "", grpsize = "", group = "", mascpref = "", 
obro = "", osis = "", ybro = "", ysis = "", birthorder = "")</code></pre>
</div>
</div>
<p>Copy and paste the output into your script and assign this to an object called <code>vars</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb16-2"><a href="#cb16-2"></a>    <span class="at">id =</span> <span class="st">""</span>,</span>
<span id="cb16-3"><a href="#cb16-3"></a>    <span class="at">sex =</span> <span class="st">""</span>,</span>
<span id="cb16-4"><a href="#cb16-4"></a>    <span class="at">ethgroup =</span> <span class="st">""</span>,</span>
<span id="cb16-5"><a href="#cb16-5"></a>    <span class="at">age =</span> <span class="st">""</span>,</span>
<span id="cb16-6"><a href="#cb16-6"></a>    <span class="at">m_non =</span> <span class="st">""</span>,</span>
<span id="cb16-7"><a href="#cb16-7"></a>    <span class="at">f_non =</span> <span class="st">""</span>,</span>
<span id="cb16-8"><a href="#cb16-8"></a>    <span class="at">m_self =</span> <span class="st">""</span>,</span>
<span id="cb16-9"><a href="#cb16-9"></a>    <span class="at">f_self =</span> <span class="st">""</span>,</span>
<span id="cb16-10"><a href="#cb16-10"></a>    <span class="at">grpsize =</span> <span class="st">""</span>,</span>
<span id="cb16-11"><a href="#cb16-11"></a>    <span class="at">group =</span> <span class="st">""</span>,</span>
<span id="cb16-12"><a href="#cb16-12"></a>    <span class="at">mascpref =</span> <span class="st">""</span>,</span>
<span id="cb16-13"><a href="#cb16-13"></a>    <span class="at">obro =</span> <span class="st">""</span>,</span>
<span id="cb16-14"><a href="#cb16-14"></a>    <span class="at">osis =</span> <span class="st">""</span>,</span>
<span id="cb16-15"><a href="#cb16-15"></a>    <span class="at">ybro =</span> <span class="st">""</span>,</span>
<span id="cb16-16"><a href="#cb16-16"></a>    <span class="at">ysis =</span> <span class="st">""</span>,</span>
<span id="cb16-17"><a href="#cb16-17"></a>    <span class="at">birthorder =</span> <span class="st">""</span></span>
<span id="cb16-18"><a href="#cb16-18"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="info">
<p>The lines breaks will probably be ugly, but you can select the code and choose <strong><code>Reformat Code</code></strong> (cmd-shift-A) from the <strong><code>Code</code></strong> menu to fix it.</p>
</div>
<p>Next, define each of these columns.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="st">"id"</span> <span class="ot">=</span> <span class="st">"participant unique ID"</span>,</span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="st">"sex"</span> <span class="ot">=</span> <span class="st">"sex of the participant (male/female)"</span>,</span>
<span id="cb17-4"><a href="#cb17-4"></a>  <span class="st">"ethgroup"</span> <span class="ot">=</span> <span class="st">"ethnic group of the participant (east_asian/west_asian/white)"</span>,</span>
<span id="cb17-5"><a href="#cb17-5"></a>  <span class="st">"age"</span> <span class="ot">=</span> <span class="st">"age of the participant in years"</span>,</span>
<span id="cb17-6"><a href="#cb17-6"></a>  <span class="st">"m_non"</span> <span class="ot">=</span> <span class="st">"mean number of times the other group members chose that male face as more attractive"</span>,</span>
<span id="cb17-7"><a href="#cb17-7"></a>  <span class="st">"f_non"</span> <span class="ot">=</span> <span class="st">"mean number of times the other group members chose that female face as more attractive"</span>,</span>
<span id="cb17-8"><a href="#cb17-8"></a>  <span class="st">"m_self"</span> <span class="ot">=</span> <span class="st">"number of times out of a possible 6 chose their male self-res face as more attractive"</span>,</span>
<span id="cb17-9"><a href="#cb17-9"></a>  <span class="st">"f_self"</span> <span class="ot">=</span> <span class="st">"number of times out of a possible 6 chose their female self-res face as more attractive"</span>,</span>
<span id="cb17-10"><a href="#cb17-10"></a>  <span class="st">"grpsize"</span> <span class="ot">=</span> <span class="st">"size of the group"</span>,</span>
<span id="cb17-11"><a href="#cb17-11"></a>  <span class="st">"group"</span> <span class="ot">=</span> <span class="st">"unique group ID"</span>,</span>
<span id="cb17-12"><a href="#cb17-12"></a>  <span class="st">"mascpref"</span> <span class="ot">=</span> <span class="st">"masculinity preference on an unrelated face preference task"</span>,</span>
<span id="cb17-13"><a href="#cb17-13"></a>  <span class="st">"obro"</span> <span class="ot">=</span> <span class="st">"number of older brothers"</span>,</span>
<span id="cb17-14"><a href="#cb17-14"></a>  <span class="st">"osis"</span> <span class="ot">=</span> <span class="st">"number of older sisters"</span>,</span>
<span id="cb17-15"><a href="#cb17-15"></a>  <span class="st">"ybro"</span> <span class="ot">=</span> <span class="st">"number of younger brothers"</span>,</span>
<span id="cb17-16"><a href="#cb17-16"></a>  <span class="st">"ysis"</span> <span class="ot">=</span> <span class="st">"number of younger sisters"</span>,</span>
<span id="cb17-17"><a href="#cb17-17"></a>  <span class="st">"birthorder"</span> <span class="ot">=</span> <span class="st">"birth order (only/firstborn/middleborn/lastborn) as calculated from number of younger and older brothers and sisters"</span></span>
<span id="cb17-18"><a href="#cb17-18"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can format this for the description file. Because the format uses curly brackets, we’re going to set the opening and closing symbols for glue to square brackets. Copy and paste these lines into the items section.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">"#'   </span><span class="sc">\\</span><span class="st">item{[colname]}{[coldesc]}"</span>,</span>
<span id="cb18-2"><a href="#cb18-2"></a>           <span class="at">colname =</span> <span class="fu">names</span>(vars),</span>
<span id="cb18-3"><a href="#cb18-3"></a>           <span class="at">coldesc =</span> vars,</span>
<span id="cb18-4"><a href="#cb18-4"></a>           <span class="at">.open =</span> <span class="st">"["</span>,</span>
<span id="cb18-5"><a href="#cb18-5"></a>           <span class="at">.close =</span> <span class="st">"]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#'   \item{id}{participant unique ID}
#'   \item{sex}{sex of the participant (male/female)}
#'   \item{ethgroup}{ethnic group of the participant (east_asian/west_asian/white)}
#'   \item{age}{age of the participant in years}
#'   \item{m_non}{mean number of times the other group members chose that male face as more attractive}
#'   \item{f_non}{mean number of times the other group members chose that female face as more attractive}
#'   \item{m_self}{number of times out of a possible 6 chose their male self-res face as more attractive}
#'   \item{f_self}{number of times out of a possible 6 chose their female self-res face as more attractive}
#'   \item{grpsize}{size of the group}
#'   \item{group}{unique group ID}
#'   \item{mascpref}{masculinity preference on an unrelated face preference task}
#'   \item{obro}{number of older brothers}
#'   \item{osis}{number of older sisters}
#'   \item{ybro}{number of younger brothers}
#'   \item{ysis}{number of younger sisters}
#'   \item{birthorder}{birth order (only/firstborn/middleborn/lastborn) as calculated from number of younger and older brothers and sisters}</code></pre>
</div>
</div>
<div class="info">
<p>I’ve written <a href="https://github.com/PsyTeachR/intro-r-pkgs/blob/main/R/data_doc.R">a function</a> that you can use to set up a data documentation file for a data object. This could be useful if you are adding many data tables to a package.</p>
</div>
</section><section id="add-to-package" class="level3" data-number="2.2.3"><h3 data-number="2.2.3" class="anchored" data-anchor-id="add-to-package">
<span class="header-section-number">2.2.3</span> Add to Package</h3>
<p>Now save this file and add the documentation to your package with the following code:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>devtools<span class="sc">::</span><span class="fu">document</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You should see the following output.</p>
<div class="cell-output">
<pre><code>ℹ Updating demopkg documentation
ℹ Loading demopkg
Writing NAMESPACE
Writing self_res_att.Rd</code></pre>
</div>
<p>You need to run this function any time you make changes to the documentation in the script. If you just see the first two lines of the output, nothing changed. The third line will show only if you have added a new data set or function to the package, and the fourth line will show if the help documentation was updated.</p>
</section></section><section id="load-in-package" class="level2" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="load-in-package">
<span class="header-section-number">2.3</span> Load in package</h2>
<p>Now restart R and make sure that your environment is clear. Run the following code to load your package. You can also use a keyboard shortcut to run this function (Mac: cmd-shift-L, Windows: ctl-shift-L).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>devtools<span class="sc">::</span><span class="fu">load_all</span>(<span class="st">"."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You should be able to access the data now.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># load as self_res_att</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="fu">data</span>(<span class="st">"self_res_att"</span>, <span class="at">package =</span> <span class="st">"demopkg"</span>)</span>
<span id="cb23-3"><a href="#cb23-3"></a></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co"># load as d1</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>d1 <span class="ot">&lt;-</span> demopkg<span class="sc">::</span>self_res_att</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You should also be able to see the documentation in the Help pane.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>?demopkg<span class="sc">::</span>self_res_att</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="glossary" class="level2" data-number="2.4"><h2 data-number="2.4" class="anchored" data-anchor-id="glossary">
<span class="header-section-number">2.4</span> Glossary</h2>
<div class="cell" data-layout-align="center">

<table><tbody><tr></tr></tbody></table>
</div>
</section><section id="further-resources" class="level2" data-number="2.5"><h2 data-number="2.5" class="anchored" data-anchor-id="further-resources">
<span class="header-section-number">2.5</span> Further Resources</h2>
<ul>
<li>
<a href="https://r-pkgs.org/Data.html">Data</a> from <span class="citation" data-cites="r-packages">Wickham (<a href="references.html#ref-r-packages" role="doc-biblioref">2015</a>)</span>
</li>
</ul></section><section id="further-practice" class="level2" data-number="2.6"><h2 data-number="2.6" class="anchored" data-anchor-id="further-practice">
<span class="header-section-number">2.6</span> Further Practice</h2>
<ol type="1">
<li>
<p>Add the dataset <code>DeBruine_2004_PRSLB_avg.csv</code> from <a href="https://osf.io/2ud56/" class="uri">https://osf.io/2ud56/</a>. This is a separate sample of participants who judged the <em>averageness</em> of male and female self- and non-self-resembling faces, rather than their <em>attractiveness</em>.</p>
<ul>
<li>id: participant unique ID</li>
<li>sex: sex of the participant (male/female)</li>
<li>group: unique group ID</li>
<li>m_avg: number of times out of a possible 6 chose a male composite face as more attractive</li>
<li>f_avg: number of times out of a possible 6 chose a female composite face as more attractive</li>
<li>m_self: number of times out of a possible 6 chose their male self-res face as more attractive</li>
<li>f_self: number of times out of a possible 6 chose their female self-res face as more attractive</li>
<li>m_non: mean number of times the other group members chose that male face as more attractive</li>
<li>f_non: mean number of times the other group members chose that female face as more attractive</li>
</ul>
</li>
<li><p>Add datasets of your own to this package or your personal package.</p></li>
</ol>


<div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="doc-bibliography" style="display: none">
<div id="ref-happy-git" class="csl-entry" role="doc-biblioentry">
Bryan, J., STAT 545 TAs, &amp; Hester, J. (n.d.). <em>Happy <span>Git</span> and <span>GitHub</span> for the <span class="nocase">useR</span></em>. <a href="https://happygitwithr.com/">https://happygitwithr.com/</a>
</div>
<div id="ref-debruine2004" class="csl-entry" role="doc-biblioentry">
DeBruine, L. M. (2004). Facial resemblance increases the attractiveness of same-sex faces more than other-sex faces. <em>Proceedings of the Royal Society of London B</em>, <em>271</em>, 2085–2090. <a href="https://doi.org/10.1098/rspb.2004.2824">https://doi.org/10.1098/rspb.2004.2824</a>
</div>
<div id="ref-knuth84" class="csl-entry" role="doc-biblioentry">
Knuth, D. E. (1984). Literate programming. <em>Comput. J.</em>, <em>27</em>(2), 97–111. <a href="https://doi.org/10.1093/comjnl/27.2.97">https://doi.org/10.1093/comjnl/27.2.97</a>
</div>
<div id="ref-r-packages" class="csl-entry" role="doc-biblioentry">
Wickham, H. (2015). <em>R packages: Organize, test, document, and share your code</em>. "O’Reilly Media, Inc.". <a href="https://r-pkgs.org/">https://r-pkgs.org/</a>
</div>
<div id="ref-advanced-r" class="csl-entry" role="doc-biblioentry">
Wickham, H. (2019). <em>Advanced <span>R</span></em>. Chapman; Hall. <a href="https://adv-r.hadley.nz">https://adv-r.hadley.nz</a>
</div>
</div>
</section></main><!-- /main --><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script><script>
// open rdrr links externally ----

var exlinks = document.querySelectorAll("a[href^='https://rdrr.io']");
var exlink_func = function(){
  window.open(this.href);
  return false;
};
for (var i = 0; i < exlinks.length; i++) {
    exlinks[i].addEventListener('click', exlink_func, false);
}

// visible second sidebar in mobile ----

function move_sidebar() {
  var toc = document.getElementById("TOC");
  var small_sidebar = document.querySelector("#quarto-sidebar .sidebar-menu-container");
  var right_sidebar = document.getElementById("quarto-margin-sidebar");

  if (window.innerWidth < 768) {
    small_sidebar.append(toc);
  } else {
    right_sidebar.append(toc);
  }
}
move_sidebar();
window.onresize = move_sidebar;
</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./01-setup.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Setting up</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03-functions.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Custom Functions</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">CC-BY 2022, Lisa DeBruine</div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/psyteachr/intro-r-pkgs">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/psyteachr">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer>


</body></html>